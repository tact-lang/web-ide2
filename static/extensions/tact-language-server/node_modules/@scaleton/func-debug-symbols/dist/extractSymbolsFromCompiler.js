"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractSymbolsFromCompiler = void 0;
const createDebugCompiler_1 = require("./createDebugCompiler");
const core_1 = require("@ton/core");
const unpackDebugSymbols_1 = require("./unpackDebugSymbols");
async function extractSymbolsFromCompiler(config) {
    const compiler = (0, createDebugCompiler_1.createDebugCompiler)();
    const result = await compiler.compileFunc(config);
    if (result.status === 'error') {
        throw new Error('Cannot compile contacts: ' + result.message);
    }
    const rootCell = core_1.Cell.fromBase64(result.codeBoc);
    return [(0, unpackDebugSymbols_1.unpackDebugSymbols)(rootCell), result.snapshot];
}
exports.extractSymbolsFromCompiler = extractSymbolsFromCompiler;
